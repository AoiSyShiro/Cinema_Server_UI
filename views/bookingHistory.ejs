<%- include('layout/header.ejs') %>

<table class="min-w-full bg-white border border-gray-200 shadow-md">
  <thead class="bg-gray-800 text-white">
    <tr>
      <th class="px-6 py-3 text-left">ID Đặt Vé</th>
      <th class="px-6 py-3 text-left">Người Dùng</th>
      <th class="px-6 py-3 text-left">Phim</th>
      <th class="px-6 py-3 text-left">Thời Gian Chiếu</th>
      <th class="px-6 py-3 text-left">Ghế</th>
      <th class="px-6 py-3 text-left">Ngày Đặt</th>
      <th class="px-6 py-3 text-left">Giá Tiền</th>
      <th class="px-6 py-3 text-left">Đồ Ăn & Thức Uống</th> <!-- Add this column for food and drinks -->
      <th class="px-6 py-3 text-left">Hình Thức Thanh Toán</th>
    </tr>
  </thead>
  <tbody>
    <% bookings.forEach(booking => { %>
      <tr class="hover:bg-gray-50 border-b">
        <td class="px-6 py-4 text-sm text-gray-900 font-medium"><%= booking.book_tickets_id %></td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= booking.user ? booking.user : 'N/A' %></td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= booking.movie ? booking.movie : 'N/A' %></td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= booking.booking_time ? booking.booking_time : 'N/A' %></td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= booking.seats && booking.seats.length > 0 ? booking.seats.join(', ') : 'N/A' %></td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= new Date(booking.booking_time).toLocaleDateString() %></td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= booking.price ? booking.price.toLocaleString() : 'N/A' %> VND</td>
        <td class="px-6 py-4 text-sm text-gray-900">
          <% booking.food_drinks.forEach(food => { %>
            <div><%= food.name %> (x<%= food.quantity %>) - <%= food.total.toLocaleString() %> VND</div>
          <% }) %>
          <% if (booking.food_drinks.length === 0) { %> N/A <% } %>
        </td>
        <td class="px-6 py-4 text-sm text-gray-900"><%= booking.payment_method ? booking.payment_method : 'N/A' %></td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include('layout/footer.ejs') %>
